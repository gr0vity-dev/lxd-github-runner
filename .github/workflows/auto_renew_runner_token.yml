name: Renew ephemeral self-hosted runner token

on: [push, pull_request]
# on:  
#   schedule:
#     - cron: '0/30 * * * *'  # "every 30 minutes
jobs:

  new_token:
    name: renew token
    timeout-minutes: 2 
    runs-on: ubuntu-latest
    steps:
      - name: Use the token in subsequent steps
        run : |          
          curl \
          -X POST \
          -H "Accept: application/vnd.github+json" \
          -H "Authorization: Bearer ${{ secrets.NANO_NODE_PAT }}"\
          -H "X-GitHub-Api-Version: 2022-11-28" \
          https://api.github.com/repos/gr0vity-dev/nano-node/actions/runners/registration-token